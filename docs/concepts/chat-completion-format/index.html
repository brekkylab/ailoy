<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-concepts/chat-completion-format" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">Chat Completion Format | Build your AI Agents instantly</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://brekkylab.github.io/ailoy/docs/concepts/chat-completion-format"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Chat Completion Format | Build your AI Agents instantly"><meta data-rh="true" name="description" content="Conventionally, in a chat completion setup, both input and output follow"><meta data-rh="true" property="og:description" content="Conventionally, in a chat completion setup, both input and output follow"><link data-rh="true" rel="icon" href="/ailoy/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://brekkylab.github.io/ailoy/docs/concepts/chat-completion-format"><link data-rh="true" rel="alternate" href="https://brekkylab.github.io/ailoy/docs/concepts/chat-completion-format" hreflang="en"><link data-rh="true" rel="alternate" href="https://brekkylab.github.io/ailoy/docs/concepts/chat-completion-format" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Chat Completion Format","item":"https://brekkylab.github.io/ailoy/docs/concepts/chat-completion-format"}]}</script><link rel="stylesheet" href="/ailoy/assets/css/styles.5037fb01.css">
<script src="/ailoy/assets/js/runtime~main.5d550923.js" defer="defer"></script>
<script src="/ailoy/assets/js/main.0094acba.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>document.documentElement.setAttribute("data-theme","dark"),document.documentElement.setAttribute("data-theme-choice","dark"),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/ailoy/img/logo.png"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top navbar--dark"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/ailoy/"><div class="navbar__logo"><img src="/ailoy/img/logo.png" alt="Ailoy Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/ailoy/img/logo.png" alt="Ailoy Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Ailoy</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/ailoy/docs/tutorial/getting-started">Documents</a><a href="https://medium.com/ailoy" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Blog<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/brekkylab/ailoy" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar--github-link"></a><a href="https://discord.gg/27rx3EJy3P" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar--discord-link"></a><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/ailoy/docs/tutorial/getting-started"><span title="Tutorial" class="categoryLinkLabel_W154">Tutorial</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/ailoy/docs/concepts/how-agent-works"><span title="Concepts" class="categoryLinkLabel_W154">Concepts</span></a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/ailoy/docs/concepts/how-agent-works"><span title="How Agent Works" class="linkLabel_WmDU">How Agent Works</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/ailoy/docs/concepts/architecture"><span title="Architecture" class="linkLabel_WmDU">Architecture</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/ailoy/docs/concepts/chat-completion-format"><span title="Chat Completion Format" class="linkLabel_WmDU">Chat Completion Format</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/ailoy/docs/resources/available-models"><span title="Resources" class="categoryLinkLabel_W154">Resources</span></a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a href="#" class="categoryLink_byQd menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false"><span title="API References" class="categoryLinkLabel_W154">API References</span></a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/ailoy/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Concepts</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Chat Completion Format</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Chat Completion Format</h1></header>
<p>Conventionally, in a chat completion setup, both <strong>input</strong> and <strong>output</strong> follow
a structured format.<br>
<!-- -->Messages are typically represented as follows:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#e2e8f0;--prism-background-color:#282c34"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#e2e8f0;background-color:#282c34"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#e2e8f0"><span class="token plain">[</span><br></span><span class="token-line" style="color:#e2e8f0"><span class="token plain">  {</span><br></span><span class="token-line" style="color:#e2e8f0"><span class="token plain">    &quot;role&quot;: &quot;system&quot;,</span><br></span><span class="token-line" style="color:#e2e8f0"><span class="token plain">    &quot;contents&quot;: [</span><br></span><span class="token-line" style="color:#e2e8f0"><span class="token plain">      { &quot;type&quot;: &quot;text&quot;, &quot;text&quot;: &quot;You are a friendly and knowledgeable assistant.&quot; }</span><br></span><span class="token-line" style="color:#e2e8f0"><span class="token plain">    ]</span><br></span><span class="token-line" style="color:#e2e8f0"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#e2e8f0"><span class="token plain">  {</span><br></span><span class="token-line" style="color:#e2e8f0"><span class="token plain">    &quot;role&quot;: &quot;user&quot;,</span><br></span><span class="token-line" style="color:#e2e8f0"><span class="token plain">    &quot;contents&quot;: [</span><br></span><span class="token-line" style="color:#e2e8f0"><span class="token plain">      { &quot;type&quot;: &quot;text&quot;, &quot;text&quot;: &quot;Can you explain how photosynthesis works?&quot; }</span><br></span><span class="token-line" style="color:#e2e8f0"><span class="token plain">    ]</span><br></span><span class="token-line" style="color:#e2e8f0"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#e2e8f0"><span class="token plain">]</span><br></span></code></pre></div></div>
<p>When it is executed, the output might look like:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#e2e8f0;--prism-background-color:#282c34"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#e2e8f0;background-color:#282c34"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#e2e8f0"><span class="token plain">{</span><br></span><span class="token-line" style="color:#e2e8f0"><span class="token plain">    &quot;role&quot;: &quot;assistant&quot;,</span><br></span><span class="token-line" style="color:#e2e8f0"><span class="token plain">    &quot;contents&quot;: [</span><br></span><span class="token-line" style="color:#e2e8f0"><span class="token plain">        {</span><br></span><span class="token-line" style="color:#e2e8f0"><span class="token plain">            &quot;type&quot;: &quot;text&quot;,</span><br></span><span class="token-line" style="color:#e2e8f0"><span class="token plain">            &quot;text&quot;: &quot;Photosynthesis is the process by which plants convert sunlight, water, and carbon dioxide into energy. They use sunlight to produce glucose (a form of sugar) and release oxygen as a byproduct.&quot;</span><br></span><span class="token-line" style="color:#e2e8f0"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#e2e8f0"><span class="token plain">    ]</span><br></span><span class="token-line" style="color:#e2e8f0"><span class="token plain">}</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>Please refer to followings for more about this schema.</p><ul>
<li class=""><a href="https://huggingface.co/docs/transformers/main/chat_templating" target="_blank" rel="noopener noreferrer" class="">Transformers apply_chat_template</a></li>
<li class=""><a href="https://platform.openai.com/docs/api-reference/chat/create" target="_blank" rel="noopener noreferrer" class="">OpenAI chat completion API</a></li>
</ul></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="message">Message<a href="#message" class="hash-link" aria-label="Direct link to Message" title="Direct link to Message" translate="no">​</a></h2>
<p>A <code>Message</code> represents one conversational turn — what one participant (system,
user, or assistant) says or does.</p>
<p>Each message contains:</p>
<ul>
<li class="">a <strong>role</strong>, indicating who is speaking,</li>
<li class="">a set of <strong>contents</strong>, describing what was said or sent.</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="role">Role<a href="#role" class="hash-link" aria-label="Direct link to Role" title="Direct link to Role" translate="no">​</a></h3>
<table><thead><tr><th>Role</th><th>Description</th></tr></thead><tbody><tr><td><strong>System</strong></td><td>System instructions and constraints provided to the assistant. It usually defines the model’s behavior or persona.</td></tr><tr><td><strong>User</strong></td><td>Contents authored by the user.</td></tr><tr><td><strong>Assistant</strong></td><td>Contents automatically generated by the assistant / AI model.</td></tr><tr><td><strong>Tool</strong></td><td>Execution results produced by external tools / functions.</td></tr></tbody></table>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="contents">Contents<a href="#contents" class="hash-link" aria-label="Direct link to Contents" title="Direct link to Contents" translate="no">​</a></h3>
<p>What is said from each role is generally referred to as content.<br>
<!-- -->However, a model can operate in different modes, producing outputs that serve
different purposes. These outputs reflect the <strong>intention</strong> behind what the
model says or performs.</p>
<table><thead><tr><th>Intent</th><th>Description</th></tr></thead><tbody><tr><td><strong>Content</strong></td><td>General output.</td></tr><tr><td><strong>Thinking(Reasoning)</strong></td><td>Some model generates intermediate thoughts or thinking traces before producing the final answer. These are stored in the thinking field (often hidden from the user) and can help trace or visualize the model’s internal decision process.</td></tr><tr><td><strong>Tool call</strong></td><td>When the model decides to invoke an external function or API instead of generating plain text. These are represented as structured objects that describe which function to call(name) and with what arguments.</td></tr></tbody></table>
<p>These types of outputs are stored in separate fields within a message, making it
possible to distinguish from general conversation.</p>
<p><strong>Example</strong></p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#e2e8f0;--prism-background-color:#282c34"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#e2e8f0;background-color:#282c34"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#e2e8f0"><span class="token plain">[</span><br></span><span class="token-line" style="color:#e2e8f0"><span class="token plain">  Message {</span><br></span><span class="token-line" style="color:#e2e8f0"><span class="token plain">      role: &quot;assistant&quot;,</span><br></span><span class="token-line" style="color:#e2e8f0"><span class="token plain">      thinking: &quot;Let’s reason step by step: photosynthesis converts light energy into chemical energy...&quot;,</span><br></span><span class="token-line" style="color:#e2e8f0"><span class="token plain">      contents: [</span><br></span><span class="token-line" style="color:#e2e8f0"><span class="token plain">          { type: &quot;text&quot;, text: &quot;Photosynthesis is the process by which plants convert sunlight, water, and carbon dioxide into energy.&quot; }</span><br></span><span class="token-line" style="color:#e2e8f0"><span class="token plain">      ],</span><br></span><span class="token-line" style="color:#e2e8f0"><span class="token plain">      tool_calls: [</span><br></span><span class="token-line" style="color:#e2e8f0"><span class="token plain">          {</span><br></span><span class="token-line" style="color:#e2e8f0"><span class="token plain">            type: &quot;function&quot;,</span><br></span><span class="token-line" style="color:#e2e8f0"><span class="token plain">            function: {</span><br></span><span class="token-line" style="color:#e2e8f0"><span class="token plain">              id: &quot;func_call_1234abcd&quot;,</span><br></span><span class="token-line" style="color:#e2e8f0"><span class="token plain">              name: &quot;get_current_location&quot;,</span><br></span><span class="token-line" style="color:#e2e8f0"><span class="token plain">              arguments: ...</span><br></span><span class="token-line" style="color:#e2e8f0"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#e2e8f0"><span class="token plain">          }</span><br></span><span class="token-line" style="color:#e2e8f0"><span class="token plain">      ],</span><br></span><span class="token-line" style="color:#e2e8f0"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#e2e8f0"><span class="token plain">]</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="part">Part<a href="#part" class="hash-link" aria-label="Direct link to Part" title="Direct link to Part" translate="no">​</a></h3>
<p>While <code>Contents</code> describe the intention of a message, <code>Part</code> defines the <strong>data
type</strong> of that message.</p>
<p><code>Part</code> can be considered as a smallest semantic units within a conversation.
Each <code>Message</code> contains a list of <code>Part</code> objects. A <code>Part</code> can represent text,
images, function calls, or any structured values, enabling rich multimodal
communication.</p>
<table><thead><tr><th>Part</th><th>Description</th></tr></thead><tbody><tr><td><strong>Text</strong></td><td>Natural-language text content</td></tr><tr><td><strong>Image</strong></td><td>Visual data or reference (e.g., binary, URL, or metadata)</td></tr><tr><td><strong>Function</strong></td><td>Structured tool or function invocation</td></tr><tr><td><strong>Value</strong></td><td>Arbitrary data (numbers, objects, JSON values, etc.)</td></tr></tbody></table>
<p>For example, if a user asks about an image, the message could look like this:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#e2e8f0;--prism-background-color:#282c34"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#e2e8f0;background-color:#282c34"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#e2e8f0"><span class="token plain">contents: [</span><br></span><span class="token-line" style="color:#e2e8f0"><span class="token plain">  {type: &quot;image&quot;, &quot;image&quot;: {data: &quot;...&quot;}}</span><br></span><span class="token-line" style="color:#e2e8f0"><span class="token plain">  {type: &quot;text&quot;, text: &quot;What you can see in this image?&quot;}</span><br></span><span class="token-line" style="color:#e2e8f0"><span class="token plain">]</span><br></span></code></pre></div></div>
<p>Together, these parts express Ailoy’s multimodal conversation.</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="delta">Delta<a href="#delta" class="hash-link" aria-label="Direct link to Delta" title="Direct link to Delta" translate="no">​</a></h3>
<p>The inference of a language model can take a significant amount of time. To
improve real-time responsiveness, many AI systems stream tokens as they are
generated. These streamed outputs are typically delivered in the form of
<strong>deltas</strong>.</p>
<p>A <strong>delta</strong>(<code>MessageDelta</code> or <code>PartDelta</code>) represents an output of this
step(inference) updated during a streaming response. As the model generates text
token by token, each incremental addition is emitted as a delta, which is later
merged into a complete <code>Message</code>.</p>
<p>Ailoy provides a simple way to retrieve and aggregate deltas. One can use
<code>accumulate</code> and <code>finish</code> function.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="tool">Tool<a href="#tool" class="hash-link" aria-label="Direct link to Tool" title="Direct link to Tool" translate="no">​</a></h2>
<p>A Tool enables the model to act — to execute external functions, access APIs, or
perform any operation beyond plain text generation.</p>
<p>Each tool has two halves:</p>
<ul>
<li class="">Description (declarative) — defines what the tool is and how it can be called.</li>
<li class="">Behavior (imperative) — defines what your code actually does when the tool is
invoked.</li>
</ul>
<p>Together, they allow the model to dynamically invoke external capabilities while
keeping reasoning and execution logically separated.</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>Please refer to following resources for more about the tool schema convention.</p><ul>
<li class=""><a href="https://huggingface.co/docs/transformers/main/chat_extras" target="_blank" rel="noopener noreferrer" class="">Transformers tool_use</a></li>
<li class=""><a href="https://platform.openai.com/docs/api-reference/chat/create#chat-create-tool_choice-function-tool-choice" target="_blank" rel="noopener noreferrer" class="">OpenAI chat completion API</a></li>
<li class=""><a href="https://modelcontextprotocol.io/specification/2025-06-18/server/tools#data-types" target="_blank" rel="noopener noreferrer" class="">MCP</a></li>
</ul></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="tool-description">Tool Description<a href="#tool-description" class="hash-link" aria-label="Direct link to Tool Description" title="Direct link to Tool Description" translate="no">​</a></h3>
<p>Ailoy follows a JSON-Schema-like convention to describe tool arguments and
optional return schemas. This ensures that language models can reliably
construct valid function calls — the schema precisely defines the allowed
parameters, required fields, and expected return structure.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#e2e8f0;--prism-background-color:#282c34"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#e2e8f0;background-color:#282c34"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#e2e8f0"><span class="token plain">{</span><br></span><span class="token-line" style="color:#e2e8f0"><span class="token plain">  &quot;name&quot;: &quot;get_temperature&quot;,</span><br></span><span class="token-line" style="color:#e2e8f0"><span class="token plain">  &quot;description&quot;: &quot;Retrieve current temperature for a specific city.&quot;,</span><br></span><span class="token-line" style="color:#e2e8f0"><span class="token plain">  &quot;parameters&quot;: {</span><br></span><span class="token-line" style="color:#e2e8f0"><span class="token plain">    &quot;type&quot;: &quot;object&quot;,</span><br></span><span class="token-line" style="color:#e2e8f0"><span class="token plain">    &quot;required&quot;: [&quot;city&quot;],</span><br></span><span class="token-line" style="color:#e2e8f0"><span class="token plain">    &quot;properties&quot;: {</span><br></span><span class="token-line" style="color:#e2e8f0"><span class="token plain">      &quot;city&quot;: { &quot;type&quot;: &quot;string&quot;, &quot;description&quot;: &quot;City name&quot; },</span><br></span><span class="token-line" style="color:#e2e8f0"><span class="token plain">      &quot;unit&quot;: { &quot;type&quot;: &quot;string&quot;, &quot;enum&quot;: [&quot;celcius&quot;, &quot;fahrenheit&quot;], &quot;default&quot;: &quot;celcius&quot; }</span><br></span><span class="token-line" style="color:#e2e8f0"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#e2e8f0"><span class="token plain">    &quot;additionalProperties&quot;: false</span><br></span><span class="token-line" style="color:#e2e8f0"><span class="token plain">  },</span><br></span><span class="token-line" style="color:#e2e8f0"><span class="token plain">  &quot;returns&quot;: {</span><br></span><span class="token-line" style="color:#e2e8f0"><span class="token plain">    &quot;type&quot;: &quot;number&quot;</span><br></span><span class="token-line" style="color:#e2e8f0"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#e2e8f0"><span class="token plain">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="tool-call">Tool Call<a href="#tool-call" class="hash-link" aria-label="Direct link to Tool Call" title="Direct link to Tool Call" translate="no">​</a></h3>
<p>When a model decides to use a tool instead of generating plain text, it emits a
tool call. This occurs inside an assistant message — since the assistant is the
one deciding to call a tool — but the call is placed inside the tool_calls field
(not contents).</p>
<p>A typical tool call message looks like this:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#e2e8f0;--prism-background-color:#282c34"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#e2e8f0;background-color:#282c34"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#e2e8f0"><span class="token plain">{</span><br></span><span class="token-line" style="color:#e2e8f0"><span class="token plain">  &quot;role&quot;: &quot;assistant&quot;,</span><br></span><span class="token-line" style="color:#e2e8f0"><span class="token plain">  &quot;contents&quot;: [</span><br></span><span class="token-line" style="color:#e2e8f0"><span class="token plain">    { &quot;type&quot;: &quot;text&quot;, &quot;text&quot;: &quot;Let me check the current weather for you.&quot; }</span><br></span><span class="token-line" style="color:#e2e8f0"><span class="token plain">  ],</span><br></span><span class="token-line" style="color:#e2e8f0"><span class="token plain">  &quot;tool_calls&quot;: [</span><br></span><span class="token-line" style="color:#e2e8f0"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#e2e8f0"><span class="token plain">      &quot;type&quot;: &quot;function&quot;,</span><br></span><span class="token-line" style="color:#e2e8f0"><span class="token plain">      &quot;function&quot;: {</span><br></span><span class="token-line" style="color:#e2e8f0"><span class="token plain">        &quot;name&quot;: &quot;get_weather&quot;,</span><br></span><span class="token-line" style="color:#e2e8f0"><span class="token plain">        &quot;arguments&quot;: { &quot;city&quot;: &quot;Seoul&quot;, &quot;unit&quot;: &quot;celcius&quot; }</span><br></span><span class="token-line" style="color:#e2e8f0"><span class="token plain">      },</span><br></span><span class="token-line" style="color:#e2e8f0"><span class="token plain">      &quot;id&quot;: &quot;call_01HZX2...&quot;</span><br></span><span class="token-line" style="color:#e2e8f0"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#e2e8f0"><span class="token plain">  ]</span><br></span><span class="token-line" style="color:#e2e8f0"><span class="token plain">}</span><br></span></code></pre></div></div>
<p>Explanation:</p>
<ul>
<li class="">The assistant outputs a structured tool call in <code>tool_calls</code> segment.</li>
<li class="">The runtime then executes the corresponding function based on its name and
arguments.</li>
<li class="">The <code>id</code> field can optionally be tagged, which uniquely identifies this tool
call, allowing the tool’s response to be correctly linked.</li>
</ul>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="tool-response">Tool Response<a href="#tool-response" class="hash-link" aria-label="Direct link to Tool Response" title="Direct link to Tool Response" translate="no">​</a></h3>
<p>Once the runtime executes the tool’s behavior, it must append a new message to
the conversation, with the role set to &quot;tool&quot;. Also, the result is stored inside
the <code>contents</code> field.</p>
<p>For example</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#e2e8f0;--prism-background-color:#282c34"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#e2e8f0;background-color:#282c34"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#e2e8f0"><span class="token plain">{</span><br></span><span class="token-line" style="color:#e2e8f0"><span class="token plain">  &quot;role&quot;: &quot;tool&quot;,</span><br></span><span class="token-line" style="color:#e2e8f0"><span class="token plain">  &quot;tool_call_id&quot;: &quot;call_01HZX2...&quot;,</span><br></span><span class="token-line" style="color:#e2e8f0"><span class="token plain">  &quot;name&quot;: &quot;get_weather&quot;,</span><br></span><span class="token-line" style="color:#e2e8f0"><span class="token plain">  &quot;contents&quot;: [</span><br></span><span class="token-line" style="color:#e2e8f0"><span class="token plain">    { &quot;type&quot;: &quot;text&quot;, &quot;text&quot;: &quot;12.3&quot; }</span><br></span><span class="token-line" style="color:#e2e8f0"><span class="token plain">  ]</span><br></span><span class="token-line" style="color:#e2e8f0"><span class="token plain">}</span><br></span></code></pre></div></div>
<p>When an error occurs in a tool, it should still be passed along so that the
model can recognize and handle it.</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#e2e8f0;--prism-background-color:#282c34"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#e2e8f0;background-color:#282c34"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#e2e8f0"><span class="token plain">{</span><br></span><span class="token-line" style="color:#e2e8f0"><span class="token plain">  &quot;role&quot;: &quot;tool&quot;,</span><br></span><span class="token-line" style="color:#e2e8f0"><span class="token plain">  &quot;tool_call_id&quot;: &quot;call_01HZX2...&quot;,</span><br></span><span class="token-line" style="color:#e2e8f0"><span class="token plain">  &quot;name&quot;: &quot;get_weather&quot;,</span><br></span><span class="token-line" style="color:#e2e8f0"><span class="token plain">  &quot;contents&quot;: [</span><br></span><span class="token-line" style="color:#e2e8f0"><span class="token plain">    { &quot;type&quot;: &quot;text&quot;, &quot;text&quot;: &quot;{ \&quot;code\&quot;: \&quot;NOT_FOUND\&quot; }&quot; }</span><br></span><span class="token-line" style="color:#e2e8f0"><span class="token plain">  ]</span><br></span><span class="token-line" style="color:#e2e8f0"><span class="token plain">}</span><br></span></code></pre></div></div>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="document">Document<a href="#document" class="hash-link" aria-label="Direct link to Document" title="Direct link to Document" translate="no">​</a></h2>
<p>A <strong>Document</strong> is the normalized representation of any retrievable knowledge
item. It consists of two components: a <strong>title</strong> and a <strong>text body</strong>.</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#e2e8f0;--prism-background-color:#282c34"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#e2e8f0;background-color:#282c34"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#e2e8f0"><span class="token punctuation" style="color:#c9d1d9">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e2e8f0"><span class="token plain">  </span><span class="token property" style="color:#79c0ff">&quot;title&quot;</span><span class="token operator" style="color:#c9d1d9">:</span><span class="token plain"> </span><span class="token string" style="color:#a5d6ff">&quot;...&quot;</span><span class="token punctuation" style="color:#c9d1d9">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e2e8f0"><span class="token plain">  </span><span class="token property" style="color:#79c0ff">&quot;text&quot;</span><span class="token operator" style="color:#c9d1d9">:</span><span class="token plain"> </span><span class="token string" style="color:#a5d6ff">&quot;...&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#e2e8f0"><span class="token plain"></span><span class="token punctuation" style="color:#c9d1d9">}</span><br></span></code></pre></div></div>
<ul>
<li class="">
<p><strong><code>title</code></strong> A short, descriptive label that helps identify the document. The
title is <strong>not used as part of model inference</strong> — it is primarily for
indexing, display, and retrieval ranking. You can think of it as metadata or a
summary, similar to a filename or headline.</p>
</li>
<li class="">
<p><strong><code>text</code></strong> The actual <strong>content</strong> of the document. This field is fed directly
into the language model during retrieval-augmented inference. It contains the
meaningful information that the model can read, reason about, and use to
generate responses.</p>
</li>
</ul>
<p>All retrieved knowledge sources (e.g., from vector databases, APIs, or local
files) are normalized into this unified <code>&quot;document&quot;</code> format before being passed
to the model. This ensures that, regardless of the original source or schema,
the model always receives consistent input.</p>
<p>For example:</p>
<table><thead><tr><th>Source</th><th>Normalized as</th></tr></thead><tbody><tr><td>Web article</td><td><code>{ &quot;title&quot;: &quot;Article Title&quot;, &quot;text&quot;: &quot;Full article content...&quot; }</code></td></tr><tr><td>PDF extract</td><td><code>{ &quot;title&quot;: &quot;File: research.pdf&quot;, &quot;text&quot;: &quot;Extracted paragraph...&quot; }</code></td></tr><tr><td>Knowledge base entry</td><td><code>{ &quot;title&quot;: &quot;FAQ: Model Loading&quot;, &quot;text&quot;: &quot;To load a model, use...&quot; }</code></td></tr></tbody></table>
<p>This design simplifies retrieval and unifies downstream processing within
Ailoy’s knowledge pipeline.</p></div></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/ailoy/docs/concepts/architecture"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Architecture</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/ailoy/docs/resources/available-models"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Available Models</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#message" class="table-of-contents__link toc-highlight">Message</a><ul><li><a href="#role" class="table-of-contents__link toc-highlight">Role</a></li><li><a href="#contents" class="table-of-contents__link toc-highlight">Contents</a></li><li><a href="#part" class="table-of-contents__link toc-highlight">Part</a></li><li><a href="#delta" class="table-of-contents__link toc-highlight">Delta</a></li></ul></li><li><a href="#tool" class="table-of-contents__link toc-highlight">Tool</a><ul><li><a href="#tool-description" class="table-of-contents__link toc-highlight">Tool Description</a></li><li><a href="#tool-call" class="table-of-contents__link toc-highlight">Tool Call</a></li><li><a href="#tool-response" class="table-of-contents__link toc-highlight">Tool Response</a></li></ul></li><li><a href="#document" class="table-of-contents__link toc-highlight">Document</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title"></div><ul class="footer__items clean-list"><li class="footer__item"><img src="/ailoy/img/ailoy-logo-letter.png" width="200px"></li><li class="footer__item"><a class="footer__link-item" href="mailto:contact@brekkylab.com">contact@brekkylab.com</a></li><li class="footer__item"><p>Copyright © 2025 Brekkylab, Inc.</p></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Resources</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/ailoy/docs/tutorial/getting-started">Getting Started</a></li><li class="footer__item"><a class="footer__link-item" href="/ailoy/api-references/python/index.html" target="_blank" rel="noopener noreferrer">Python API References</a></li><li class="footer__item"><a class="footer__link-item" href="/ailoy/api-references/nodejs/index.html" target="_blank" rel="noopener noreferrer">Javascript(Node.js) API References</a></li><li class="footer__item"><a class="footer__link-item" href="/ailoy/api-references/js-web/index.html" target="_blank" rel="noopener noreferrer">Javascript(Web) API References</a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/brekkylab/ailoy" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://discord.gg/27rx3EJy3P" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://x.com/ailoy_co" target="_blank" rel="noopener noreferrer" class="footer__link-item">X<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://www.linkedin.com/company/107147231" target="_blank" rel="noopener noreferrer" class="footer__link-item">Linkedin<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://medium.com/ailoy" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blog<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div></div></footer></div>
</body>
</html>