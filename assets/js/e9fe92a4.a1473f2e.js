"use strict";(self.webpackChunkailoy_docs=self.webpackChunkailoy_docs||[]).push([[2496],{3490:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>h,frontMatter:()=>r,metadata:()=>o,toc:()=>c});const o=JSON.parse('{"id":"concepts/architecture","title":"Architecture","description":"Ailoy is built on a modular architecture that separates AI inference, external","source":"@site/docs/concepts/architecture.mdx","sourceDirName":"concepts","slug":"/concepts/architecture","permalink":"/ailoy/docs/concepts/architecture","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"documentSidebar","previous":{"title":"How Agent Works","permalink":"/ailoy/docs/concepts/how-agent-works"},"next":{"title":"Chat Completion Format","permalink":"/ailoy/docs/concepts/chat-completion-format"}}');var s=t(4848),i=t(8453);const r={},l="Architecture",d={},c=[{value:"<code>Agent</code>",id:"agent",level:2},{value:"<code>LangModel</code>",id:"langmodel",level:2},{value:"<code>Tool</code>",id:"tool",level:2},{value:"<code>Knowledge</code>",id:"knowledge",level:2},{value:"Integration with <code>LangModel</code>",id:"integration-with-langmodel",level:3},{value:"1. Native",id:"1-native",level:4},{value:"2. Tool",id:"2-tool",level:4}];function a(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",mermaid:"mermaid",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components},{Details:t}=n;return t||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"architecture",children:"Architecture"})}),"\n",(0,s.jsxs)(n.p,{children:["Ailoy is built on a modular architecture that separates AI inference, external\ntools, and knowledge retrieval, yet seamlessly composes them through ",(0,s.jsx)(n.code,{children:"Agent"}),"."]}),"\n",(0,s.jsx)(n.p,{children:"At a high level, Ailoy consists of the following core components:"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Component"}),(0,s.jsx)(n.th,{children:"Description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"Agent"})}),(0,s.jsx)(n.td,{children:"Orchestrates high-level agent behavior"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"LangModel"})}),(0,s.jsx)(n.td,{children:"Serves as the reasoning and text generation engine"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"Tool"})}),(0,s.jsx)(n.td,{children:"Provides an extension interface for invoking external capabilities"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.code,{children:"Knowledge"})}),(0,s.jsx)(n.td,{children:"Manages retrieval and augmentation with external information"})]})]})]}),"\n",(0,s.jsx)(n.h2,{id:"agent",children:(0,s.jsx)(n.code,{children:"Agent"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"Agent"})," is the top-level component. It is responsive to answer user's query, by\ncontrolling execution of its sub-components."]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Generate text using the ",(0,s.jsx)(n.code,{children:"LangModel"})]}),"\n",(0,s.jsxs)(n.li,{children:["Invoke external functions through ",(0,s.jsx)(n.code,{children:"Tool"})]}),"\n",(0,s.jsxs)(n.li,{children:["Retrieve context from ",(0,s.jsx)(n.code,{children:"Knowledge"})]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"Agent"})," exposes the ",(0,s.jsx)(n.code,{children:"run()"})," function. It streams intermediate results or\nreasoning traces back to the user."]}),"\n",(0,s.jsx)(n.h2,{id:"langmodel",children:(0,s.jsx)(n.code,{children:"LangModel"})}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"LangModel"})," is the AI inference engine of Ailoy. It performs the actual\nreasoning and text generation that power the agent\u2019s intelligence. Given an\ninput sequence of messages, it interprets the context, predicts the next tokens,\nand generates coherent responses."]}),"\n",(0,s.jsx)(n.p,{children:"Ailoy supports two types of models:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"API Models \u2014 cloud-based models"}),"\n",(0,s.jsx)(n.li,{children:"Local Models \u2014 models that run entirely on your device"}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"LangModel"})," defines how messages are tokenized, formatted, and executed. It\noperates independently from the Agent, so you can use it directly when tools or\nknowledge modules are not required."]}),"\n",(0,s.jsx)(n.h2,{id:"tool",children:(0,s.jsx)(n.code,{children:"Tool"})}),"\n",(0,s.jsxs)(n.p,{children:["The Tool module enables the agent to perform operations beyond what ",(0,s.jsx)(n.code,{children:"LangModel"}),"\ncan do. It allows the model to interact with external systems, execute logic, or\nquery real-world data."]}),"\n",(0,s.jsxs)(n.p,{children:["A tool consists of two main parts: ",(0,s.jsx)(n.strong,{children:"tool description"})," and ",(0,s.jsx)(n.strong,{children:"tool behavior"}),"."]}),"\n",(0,s.jsx)(n.mermaid,{value:'flowchart TD\n  subgraph Tool["Tool"]\n    direction TB\n    D["Tool Description"]\n    B["Tool Behavior"]\n  end'}),"\n",(0,s.jsxs)(n.p,{children:["A ",(0,s.jsx)(n.strong,{children:"tool description"})," defines how the tool is exposed to the model. It includes\nthe tool\u2019s name, description, parameters, and an optional return schema. This\nformat follows the JSON Schema convention."]}),"\n",(0,s.jsx)(n.p,{children:"Conventionally, this is represented in JSON Schema, which we also follow."}),"\n",(0,s.jsxs)(t,{children:[(0,s.jsx)("summary",{children:"Schema Example"}),(0,s.jsx)("p",{children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",children:'{\n  "name": "temperature",\n  "description": "Get current temperature",\n  "parameters": {\n    "type": "object",\n    "properties": {\n      "location": {\n        "type": "string",\n        "description": "The city name"\n      },\n      "unit": {\n        "type": "string",\n        "enum": ["Celsius", "Fahrenheit"]\n      }\n    },\n    "required": ["location", "unit"]\n  },\n  "returns": {\n    "type": "number",\n    "description": "Null if the given city name is unavailable.",\n    "nullable": true\n  }\n}\n'})})})]}),"\n",(0,s.jsxs)(n.p,{children:["In contrast, a ",(0,s.jsx)(n.strong,{children:"tool behavior"})," defines what the tool actually does when\ninvoked. For example, it can be a custom function in Python, JavaScript, or\nRust. When the model outputs a structured function call matching the tool\u2019s\nschema, the Agent automatically routes it to the corresponding behavior."]}),"\n",(0,s.jsx)(n.p,{children:"You can also use the Model Context Protocol (MCP) to register and expose tools\ndynamically. This provides a seamless way to define, describe, and connect tool\nbehaviors across different environments."}),"\n",(0,s.jsx)(n.p,{children:"Ailoy can define 3 types of the tools:"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"types"}),(0,s.jsx)(n.th,{children:"description"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Function"}),(0,s.jsxs)(n.td,{children:["A native function in the host language, with explicit ",(0,s.jsx)(n.code,{children:"ToolDesc"})]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"MCP"}),(0,s.jsxs)(n.td,{children:["A remote tool exposed via the Model ",(0,s.jsx)(n.strong,{children:"Context Protocol (MCP)"})]})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Builtin"}),(0,s.jsxs)(n.td,{children:["Predefined tools provided by the ",(0,s.jsx)(n.strong,{children:"Ailoy"})," runtime itself"]})]})]})]}),"\n",(0,s.jsx)(n.h2,{id:"knowledge",children:(0,s.jsx)(n.code,{children:"Knowledge"})}),"\n",(0,s.jsx)(n.p,{children:"The Knowledge module enhances the agent\u2019s reasoning ability by providing factual\nor contextual data retrieved from external sources such as vector stores,\ndatabases, or document collections."}),"\n",(0,s.jsx)(n.p,{children:"When a query is made, the Knowledge module performs retrieval and returns an\narray of documents relevant to the user\u2019s input. These documents are then\nintegrated into the reasoning flow, allowing the model to produce more grounded\nand accurate responses. This process is known as Retrieval-Augmented Generation\n(RAG)."}),"\n",(0,s.jsx)(n.mermaid,{value:'flowchart TD\n  subgraph Knowledge["Knowledge"]\n    direction TB\n    E["EmbeddingModel"]\n    V["VectorStore"]\n  end'}),"\n",(0,s.jsx)(n.p,{children:"Knowledge combines two core components:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"EmbeddingModel"}),": Converts texts into numerical embeddings that represent\nsemantic meaning."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"VectorStore"}),": Stores, searches, and manages embeddings for efficient\nsimilarity retrieval."]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Together, these components allow the agent to search semantically similar\ndocuments rather than relying on keyword matches, enabling more intelligent\ncontext enrichment."}),"\n",(0,s.jsxs)(n.h3,{id:"integration-with-langmodel",children:["Integration with ",(0,s.jsx)(n.code,{children:"LangModel"})]}),"\n",(0,s.jsxs)(n.p,{children:["Ailoy allows the ",(0,s.jsx)(n.code,{children:"Knowledge"})," module to be attached to a ",(0,s.jsx)(n.code,{children:"LangModel"})," in two\nintegration modes:"]}),"\n",(0,s.jsx)(n.h4,{id:"1-native",children:"1. Native"}),"\n",(0,s.jsxs)(n.p,{children:["In ",(0,s.jsx)(n.strong,{children:"native mode"}),", the ",(0,s.jsx)(n.code,{children:"LangModel"})," itself is expected to support external\ndocument input. The retrieved documents are directly attached to the model\u2019s\ninput, allowing the model to internally process them as part of its reasoning."]}),"\n",(0,s.jsxs)(n.p,{children:["However, many models currently do not support native document input formats. To\naddress this, Ailoy provides a ",(0,s.jsx)(n.strong,{children:"polyfill mechanism"}),". It is an internal\naugmentation layer that modifies the model\u2019s chat template so it can recognize\nand interpret documents correctly. This polyfill enables RAG behavior even on\nmodels lacking explicit document-handling capabilities."]}),"\n",(0,s.jsx)(n.h4,{id:"2-tool",children:"2. Tool"}),"\n",(0,s.jsxs)(n.p,{children:["In ",(0,s.jsx)(n.strong,{children:"tool mode"}),", the ",(0,s.jsx)(n.code,{children:"Knowledge"})," module is registered as a callable ",(0,s.jsx)(n.strong,{children:"tool"}),"\n(",(0,s.jsx)(n.code,{children:"knowledge"})," tool). When the ",(0,s.jsx)(n.code,{children:"LangModel"})," determines that external context is\nneeded, it issues a function call to the ",(0,s.jsx)(n.code,{children:"knowledge"})," tool. The tool executes the\nretrieval process and returns relevant documents, which the agent then feeds\nback into the reasoning flow."]}),"\n",(0,s.jsx)(n.p,{children:"This design allows the same retrieval process to be invoked dynamically through\nthe model\u2019s reasoning, even for models that cannot handle direct document input."})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(a,{...e})}):a(e)}}}]);