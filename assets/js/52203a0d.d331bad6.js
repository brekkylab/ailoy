"use strict";(self.webpackChunkailoy_docs=self.webpackChunkailoy_docs||[]).push([[288],{1458:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>b,contentTitle:()=>k,default:()=>A,frontMatter:()=>x,metadata:()=>s,toc:()=>v});const s=JSON.parse('{"id":"tutorial/calling-low-level-apis","title":"Calling Low-Level APIs","description":"As mentioned earlier, the Agent is essentially a wrapper around the Runtime.","source":"@site/docs/tutorial/calling-low-level-apis.mdx","sourceDirName":"tutorial","slug":"/tutorial/calling-low-level-apis","permalink":"/ailoy/docs/tutorial/calling-low-level-apis","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"documentSidebar","previous":{"title":"Integrate with MCP","permalink":"/ailoy/docs/tutorial/integrate-with-mcp"},"next":{"title":"RAG with Vector Store","permalink":"/ailoy/docs/tutorial/rag-with-vector-store"}}');var a,o,i,r,l,h,c,d,m,u,p=t(4848),g=t(8453),f=t(6540);function w(){return w=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var s in t)({}).hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},w.apply(null,arguments)}const y=({title:e,titleId:n,...t})=>f.createElement("svg",w({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 522.742 338.371","aria-labelledby":n},t),e?f.createElement("title",{id:n},e):null,a||(a=f.createElement("defs",null,f.createElement("style",null,"@font-face{font-family:Excalifont;src:url(data:font/woff2;base64,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)}"))),o||(o=f.createElement("path",{fill:"#fff",d:"M0 0h522.742v338.371H0z"})),i||(i=f.createElement("path",{fill:"none",stroke:"#1e1e1e",strokeLinecap:"round",strokeWidth:2,d:"M42 10c40.12.51 83.1-.77 178.18 0M42 10c70.23 1.65 140.46 1.26 178.18 0m0 0c20.02.01 31.06 11.96 32 32m-32-32c23 1.44 33.86 9.73 32 32m0 0c-1.87 82.66.34 162.83 0 253.68m0-253.68c-2.15 99.53-2 199.87 0 253.68m0 0c-.34 23.18-10.26 31.09-32 32m32-32c2.16 22.07-11.94 31.18-32 32m0 0c-37.8-1.14-76.95-1.01-178.18 0m178.18 0c-57.12-1.55-112.27-1.6-178.18 0m0 0c-20.95 1.85-30.88-11.78-32-32m32 32c-21.75 1.2-33.38-8.89-32-32m0 0c1.25-81.93-.33-165.4 0-253.68m0 253.68c.75-64.07-.48-128.44 0-253.68m0 0C8.51 19.51 20.3 9.24 42 10M10 42c1.09-19.38 8.74-33.22 32-32M58.2 69.793c25.01 2.17 53.22.69 71.46 0m-71.46 0c27.55-.29 52.89-.45 71.46 0m0 0c20.78-1.38 31.99 11.42 32 32m-32-32c19.89 2.19 31.7 12.64 32 32m0 0c-1.18 27.2.49 54.24 0 86.99m0-86.99c.99 26.43-.37 51.7 0 86.99m0 0c.41 22.85-10.28 32.19-32 32m32-32c-1.01 20.44-9.39 33.48-32 32m0 0c-27.12 1.48-51.76-1.53-71.46 0m71.46 0c-27.5 1.48-56.63-.32-71.46 0m0 0c-20.74-1.62-31.2-12.58-32-32m32 32c-20.78 2.11-32.48-10.28-32-32m0 0c1.21-34.4.23-65.41 0-86.99m0 86.99c-.31-32.21.68-65.14 0-86.99m0 0c.45-20.83 11.09-33.48 32-32m-32 32c1.99-19.5 9.27-30.28 32-32"})),f.createElement("text",{y:17.62,fill:"#1e1e1e",dominantBaseline:"alphabetic",fontFamily:"Excalifont, Xiaolai, Segoe UI Emoji",fontSize:20,style:{whiteSpace:"pre"},transform:"translate(90.695 24.3)"},"Runtime"),f.createElement("text",{y:17.62,fill:"#1e1e1e",dominantBaseline:"alphabetic",fontFamily:"Excalifont, Xiaolai, Segoe UI Emoji",fontSize:20,style:{whiteSpace:"pre"},transform:"translate(76.93 83.738)"},"VM"),r||(r=f.createElement("path",{fill:"none",stroke:"#1e1e1e",strokeLinecap:"round",strokeWidth:2,d:"M319.113 15.273c43.35.13 83.38 2.23 161.63 0m-161.63 0c62.19.27 125.13 1.82 161.63 0m0 0c20.07.97 32.7 11.62 32 32m-32-32c20.04.39 29.9 9.86 32 32m0 0c-.25 80.9-2.05 164.6 0 249.1m0-249.1c-.19 69.24-.86 139.26 0 249.1m0 0c.52 22-9.58 32.68-32 32m32-32c1.12 20.61-10.54 30.11-32 32m0 0c-34.66.84-72.35 1.2-161.63 0m161.63 0c-35.84.58-73.38 2.23-161.63 0m0 0c-22.03.72-33.78-12.18-32-32m32 32c-19.16 1.54-33.98-11.36-32-32m0 0c-.71-55.56-1.21-111.13 0-249.1m0 249.1c2.31-88.95 1.63-177.36 0-249.1m0 0c-1.89-20.74 10.57-30.46 32-32m-32 32c1.41-23.45 9.61-31.98 32-32"})),f.createElement("text",{y:17.62,fill:"#1e1e1e",dominantBaseline:"alphabetic",fontFamily:"Excalifont, Xiaolai, Segoe UI Emoji",fontSize:20,style:{whiteSpace:"pre"},transform:"translate(358.852 29.945)"},"My App."),l||(l=f.createElement("g",{strokeLinecap:"round"},f.createElement("path",{fill:"none",stroke:"#1e1e1e",strokeWidth:2,d:"M285.208 103.21c-5.03.25-25.03 1.16-30.19 1.54m31.02-.58c-5.03.34-25.81 1.01-31.19 1.08"}),f.createElement("path",{fill:"none",stroke:"#1e1e1e",strokeWidth:2,d:"M269.308 99.58c-4.11 2.03-7.45 2.31-14.46 5.67m14.46-5.67c-5.39 1.77-10.11 3.9-14.46 5.67M269.578 110.2c-4.14-.49-7.55-2.74-14.73-4.95m14.73 4.95c-5.46-2.07-10.27-3.78-14.73-4.95"}))),h||(h=f.createElement("g",{strokeLinecap:"round"},f.createElement("path",{fill:"none",stroke:"#1e1e1e",strokeWidth:2,d:"M252.58 246.967c6.38-.14 31.69-.34 37.98-.32m-38.42-.25c6.34-.11 31.91.48 38.23.7M272.37 253.097c5.56-1.22 10.89-3.62 18-6m-18 6c5.49-1.72 10.5-4.04 18-6"}),f.createElement("path",{fill:"none",stroke:"#1e1e1e",strokeWidth:2,d:"M272.72 240.127c5.48 3.02 10.7 4.85 17.65 6.97m-17.65-6.97c5.36 2.14 10.26 3.68 17.65 6.97"}))),f.createElement("text",{y:14.096,fill:"#1e1e1e",dominantBaseline:"alphabetic",fontFamily:"Excalifont, Xiaolai, Segoe UI Emoji",fontSize:16,style:{whiteSpace:"pre"},transform:"translate(295.168 96.27)"},"Request"),f.createElement("text",{y:14.096,fill:"#1e1e1e",dominantBaseline:"alphabetic",fontFamily:"Excalifont, Xiaolai, Segoe UI Emoji",fontSize:16,style:{whiteSpace:"pre"},transform:"translate(171.363 238.027)"},"Response"),c||(c=f.createElement("path",{fill:"none",stroke:"#1e1e1e",strokeLinecap:"round",strokeWidth:2,d:"M230.187 87.29c3.76 0 8.97 2.43 11.71 5.23 2.75 2.81 4.32 7.52 4.77 11.59.45 4.06-.06 9.31-2.06 12.81-2.01 3.5-6.14 6.97-9.97 8.19s-9.39.78-13.03-.86c-3.64-1.65-7.04-5.38-8.8-9.02-1.75-3.63-2.68-8.74-1.72-12.8.95-4.06 4.21-8.93 7.45-11.57 3.25-2.63 9.94-3.7 12.02-4.23 2.08-.54.52.54.48 1.01m-2.41-1.18c3.78-.48 9.15 1.84 12.21 4.64s5.35 8.03 6.15 12.16.68 9.06-1.35 12.63c-2.04 3.57-7.22 7.34-10.86 8.79-3.65 1.44-7.49 1.37-10.99-.12-3.51-1.49-8.02-5.28-10.07-8.82-2.04-3.53-2.87-8.47-2.22-12.39s3.19-8.35 6.14-11.13c2.94-2.78 9.53-4.85 11.51-5.56s.37.96.39 1.32"})),d||(d=f.createElement("g",{strokeLinecap:"round"},f.createElement("path",{fill:"none",stroke:"#1e1e1e",strokeWidth:2,d:"M211.833 108.6c-17.77 4.58-90.74 22.77-108.48 27.69m107.56-28.61c-17.32 4.66-87.69 24.81-105.3 29.55"}),f.createElement("path",{fill:"none",stroke:"#1e1e1e",strokeWidth:2,d:"M125.953 122.68c-4.24 2.12-11.27 8.89-20.34 14.55m20.34-14.55c-6.83 5.12-14.6 10.88-20.34 14.55"}),f.createElement("path",{fill:"none",stroke:"#1e1e1e",strokeWidth:2,d:"M130.543 139.16c-5.36-1.66-13.45 1.29-24.93-1.93m24.93 1.93c-8.55-.78-17.96-.88-24.93-1.93"}))),m||(m=f.createElement("g",{strokeLinecap:"round"},f.createElement("path",{fill:"none",stroke:"#1e1e1e",strokeWidth:2,d:"M100.045 178.611c12.13 10.18 60.23 50.11 72.18 60.08m-70.3-60.69c12.1 10.36 57.98 51.8 69.48 62.03M148.205 230.711c6.05 2.38 8.73 3.52 23.2 9.32m-23.2-9.32c6.63 2.29 11.7 4.32 23.2 9.32"}),f.createElement("path",{fill:"none",stroke:"#1e1e1e",strokeWidth:2,d:"M159.615 217.981c3.73 4.89 4.11 8.61 11.79 22.05m-11.79-22.05c3.92 5.46 6.17 10.63 11.79 22.05"}))),u||(u=f.createElement("path",{fill:"none",stroke:"#1e1e1e",strokeLinecap:"round",strokeWidth:2,d:"M318.688 228.15c4.28.13 10.01 3.06 13.09 6.36s5.23 8.99 5.38 13.43c.16 4.44-1.79 9.56-4.45 13.2-2.65 3.63-7.24 7.53-11.46 8.62s-9.77-.12-13.86-2.08c-4.1-1.95-8.86-5.55-10.7-9.66-1.85-4.11-1.69-10.68-.38-15.01s4.47-8.6 8.24-10.97c3.76-2.38 11.89-2.74 14.34-3.27 2.46-.53.36-.21.36.08m-7.16.22c4.2-1.09 11.19-.57 15.08 1.53s6.88 6.7 8.26 11.05c1.37 4.35 1.51 10.83-.01 15.05-1.53 4.23-5.33 8.2-9.13 10.29-3.79 2.09-9.23 3.13-13.62 2.26-4.4-.88-9.97-4.12-12.74-7.51-2.76-3.4-3.92-8.62-3.86-12.87.07-4.25 1.43-9.28 4.24-12.61 2.82-3.34 10.64-6.1 12.64-7.39s-.57-.51-.63-.33"})),f.createElement("text",{y:14.096,fill:"#1e1e1e",dominantBaseline:"alphabetic",fontFamily:"Excalifont, Xiaolai, Segoe UI Emoji",fontSize:16,style:{whiteSpace:"pre"},transform:"translate(39.117 146.594)"},"LLM Inference")),x={},k="Calling Low-Level APIs",b={},v=[{value:"Operator",id:"operator",level:2},{value:"Text chunking",id:"text-chunking",level:3},{value:"Component",id:"component",level:2},{value:"Direct language model inference",id:"direct-language-model-inference",level:3}];function j(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",p:"p",pre:"pre",strong:"strong",...(0,g.R)(),...e.components},{TabItem:t,Tabs:s,TerminalBox:a}=n;return t||E("TabItem",!0),s||E("Tabs",!0),a||E("TerminalBox",!0),(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(n.header,{children:(0,p.jsx)(n.h1,{id:"calling-low-level-apis",children:"Calling Low-Level APIs"})}),"\n",(0,p.jsxs)(n.p,{children:["As mentioned earlier, the ",(0,p.jsx)(n.code,{children:"Agent"})," is essentially a wrapper around the ",(0,p.jsx)(n.code,{children:"Runtime"}),".\nIn a nutshell, a component called the ",(0,p.jsx)(n.code,{children:"VM"})," is responsible for handling\ncompute-intensive tasks, such as LLM inference. The ",(0,p.jsx)(n.code,{children:"Runtime"})," serves as a bridge\nbetween the user and the ",(0,p.jsx)(n.code,{children:"VM"}),", delegating user requests to the ",(0,p.jsx)(n.code,{children:"VM"})," and\nforwarding results back from the ",(0,p.jsx)(n.code,{children:"VM"})," to the user."]}),"\n",(0,p.jsx)("p",{align:"center",children:(0,p.jsx)(y,{style:{width:"50%",height:"50%"}})}),"\n",(0,p.jsxs)(n.p,{children:["By using the ",(0,p.jsx)(n.code,{children:"Runtime"})," directly, you can send requests to the ",(0,p.jsx)(n.code,{children:"VM"})," yourself.\nThis is useful when you need more advanced configuration or want to call APIs\nthat are not available through the high-level interfaces."]}),"\n","\n",(0,p.jsx)(n.admonition,{type:"info",children:(0,p.jsxs)(n.p,{children:["See ",(0,p.jsx)(n.a,{href:"/ailoy/docs/api-references/internal-runtime-apis",children:"Internal Runtime APIs"})," for\nthe full list of available APIs."]})}),"\n","\n",(0,p.jsx)(n.h2,{id:"operator",children:"Operator"}),"\n",(0,p.jsxs)(n.p,{children:["Let\u2019s take a look at how the lower-level API works, with the simplest example\n",(0,p.jsx)(n.code,{children:"echo"}),". The ",(0,p.jsx)(n.code,{children:"echo"})," operator is a basic operator that returns the user's input\nas-is."]}),"\n",(0,p.jsx)(n.p,{children:"Here\u2019s how to call the echo operator:"}),"\n",(0,p.jsxs)(s,{groupId:"code-language",children:[(0,p.jsx)(t,{value:"python",label:"Python",children:(0,p.jsx)(n.pre,{children:(0,p.jsx)(n.code,{className:"language-python",metastring:"showLineNumbers",children:'from ailoy import Runtime\n\nrt = Runtime()\n\nresult = rt.call("echo", {"text": "Hello world"})\n\nprint(result)\n\nrt.stop()\n'})})}),(0,p.jsx)(t,{value:"node",label:"JavaScript(Node)",children:(0,p.jsx)(n.pre,{children:(0,p.jsx)(n.code,{className:"language-typescript",metastring:"showLineNumbers",children:'import { startRuntime } from "ailoy-node";\n\n(async () => {\n  const rt = await startRuntime();\n\n  const result = await rt.call("echo", { text: "Hello world" });\n\n  console.log(results);\n\n  await rt.stop();\n})();\n'})})})]}),"\n",(0,p.jsx)(a,{children:"Hello world"}),"\n",(0,p.jsx)(n.h3,{id:"text-chunking",children:"Text chunking"}),"\n",(0,p.jsxs)(n.p,{children:["Next, let\u2019s try a more practical operator. The\n",(0,p.jsx)(n.a,{href:"/ailoy/docs/api-references/internal-runtime-apis#split_text",children:(0,p.jsx)(n.code,{children:"split_text"})})," operator\ntransforms a long document into a set of smaller chunks. This operation is\nessential for tasks like Retrieval-Augmented Generation (RAG)."]}),"\n",(0,p.jsxs)(n.p,{children:["We\u2019ll use Lev Tolstoy\u2019s\n",(0,p.jsx)(n.a,{href:"https://www.gutenberg.org/files/6157/6157-h/6157-h.htm",children:"What Men Live by"})," to\nbreak a long passage into multiple chunks."]}),"\n",(0,p.jsxs)(s,{groupId:"code-language",children:[(0,p.jsx)(t,{value:"python",label:"Python",children:(0,p.jsx)(n.pre,{children:(0,p.jsx)(n.code,{className:"language-python",metastring:"showLineNumbers",children:'from ailoy import Runtime\n\nrt = Runtime()\n\nwith open("what_men_live_by.txt") as f:\n    text = f.read()\n\nresult = rt.call("split_text", {"text": text})\nchunks = result["chunks"]\n\nprint(len(chunks))  # == 12\n\n# Print chunks\nprint("********************** First chunk **********************")\nprint(chunks[0])\nprint("*********************************************************")\n\nrt.stop()\n'})})}),(0,p.jsx)(t,{value:"node",label:"JavaScript(Node)",children:(0,p.jsx)(n.pre,{children:(0,p.jsx)(n.code,{className:"language-typescript",metastring:"showLineNumbers",children:'import { startRuntime } from "ailoy-node";\nimport { readFile } from "fs/promises";\n\n(async () => {\n  const rt = await startRuntime();\n\n  const text = await readFile("what_men_live_by.txt", "utf-8");\n\n  const result = await rt.call("split_text", { text });\n  const chunks = result.chunks;\n\n  console.log(chunks.length); // == 12\n\n  // Print chunks\n  console.log("********************** First chunk **********************");\n  console.log(chunks[0]);\n  console.log("*********************************************************");\n\n  await rt.stop();\n})();\n'})})})]}),"\n",(0,p.jsx)(a,{children:"\n12\n********************** First chunk **********************\nWHAT MEN LIVE BY\nA shoemaker named Simon, who had neither house nor land of his own, lived with his wife and children in a peasant\u2019s hut, and earned his living by his work. Work was cheap, but bread was dear, and what he earned he spent for food. The man and his wife had but one sheepskin coat between them for winter wear, and even that was torn to tatters, and this was the second year he had been wanting to buy sheep-skins for a new coat. Before winter Simon saved up a little money: a three-rouble note lay hidden in his wife\u2019s box, and five roubles and twenty kopeks were owed him by customers in the village.\n\nSo one morning he prepared to go to the village to buy the sheep-skins. He put\non over his shirt his wife\u2019s wadded nankeen jacket, and over that he put his own\ncloth coat. He took the three-rouble note in his pocket, cut himself a stick to\nserve as a staff, and started off after breakfast. \u201cI\u2019ll collect the five\nroubles that are due to me,\u201d thought he, \u201cadd the three I have got, and that\nwill be enough to buy sheep-skins for the winter coat.\u201d\n\nHe came to the village and called at a peasant\u2019s hut, but the man was not at\nhome. The peasant\u2019s wife promised that the money should be paid next week, but\nshe would not pay it herself. Then Simon called on another peasant, but this one\nswore he had no money, and would only pay twenty kopeks which he owed for a pair\nof boots Simon had mended. Simon then tried to buy the sheep-skins on credit,\nbut the dealer would not trust him.\n\n\u201cBring your money,\u201d said he, \u201cthen you may have your pick of the skins. We know\nwhat debt-collecting is like.\u201d So all the business the shoemaker did was to get\nthe twenty kopeks for boots he had mended, and to take a pair of felt boots a\npeasant gave him to sole with leather.\n\nSimon felt downhearted. He spent the twenty kopeks on vodka, and started\nhomewards without having bought any skins. In the morning he had felt the frost;\nbut now, after drinking the vodka, he felt warm, even without a sheep-skin coat.\nHe trudged along, striking his stick on the frozen earth with one hand, swinging\nthe felt boots with the other, and talking to himself.\n\nI \u201cI\u2019m quite warm,\u201d said he, \u201cthough I have no sheep-skin coat. I\u2019ve had a drop,\nand it runs through all my veins. I need no sheep-skins. I go along and don\u2019t\nworry about anything. That\u2019s the sort of man I am! What do I care? I can live\nwithout sheep-skins. I don\u2019t need them. My wife will fret, to be sure. And, true\nenough, it is a shame; one works all day long, and then does not get paid. Stop\na bit! If you don\u2019t bring that money along, sure enough I\u2019ll skin you, blessed\nif I don\u2019t. How\u2019s that? He pays twenty kopeks at a time! What can I do with\ntwenty kopeks? Drink it-that\u2019s all one can do! Hard up, he says he is! So he may\nbe\u2014but what about me? You have a house, and cattle, and everything; I\u2019ve only\nwhat I stand up in! You have corn of your own growing; I have to buy every\ngrain. Do what I will, I must spend three roubles every week for bread alone. I\ncome home and find the bread all used up, and I have to fork out another rouble\nand a half. So just pay up what you owe, and no nonsense about it!\u201d\n\nBy this time he had nearly reached the shrine at the bend of the road. Looking\nup, he saw something whitish behind the shrine. The daylight was fading, and the\nshoemaker peered at the thing without being able to make out what it was. \u201cThere\nwas no white stone here before. Can it be an ox? It\u2019s not like an ox. It has a\nhead like a man, but it\u2019s too white; and what could a man be doing there?\u201d\n\nHe came closer, so that it was clearly visible. To his surprise it really was a\nman, alive or dead, sitting naked, leaning motionless against the shrine. Terror\nseized the shoemaker, and he thought, \u201cSome one has killed him, stripped him,\nand left him there. If I meddle I shall surely get into trouble.\u201d\n\n---\n\n"}),"\n",(0,p.jsx)(n.h2,{id:"component",children:"Component"}),"\n",(0,p.jsxs)(n.p,{children:["Some jobs may require state, like member variables in a class. Ailoy provides\nsupport for this kind of stateful structure through a type called a ",(0,p.jsx)(n.code,{children:"Component"}),"."]}),"\n",(0,p.jsx)(n.h3,{id:"direct-language-model-inference",children:"Direct language model inference"}),"\n",(0,p.jsxs)(n.p,{children:["In this example, we\u2019ll directly invoke an LLM using the low-level Runtime API.\nTo begin, a ",(0,p.jsx)(n.code,{children:"Component"})," must first be initialized using the ",(0,p.jsx)(n.code,{children:"define"})," call. In\nhere, we define a ",(0,p.jsx)(n.code,{children:"Component"})," of type\n",(0,p.jsx)(n.a,{href:"/ailoy/docs/api-references/internal-runtime-apis#tvm_language_model",children:"tvm_language_model"}),"\nwith the name ",(0,p.jsx)(n.code,{children:"lm0"}),". It can later be removed using the ",(0,p.jsx)(n.code,{children:"delete"})," call."]}),"\n",(0,p.jsxs)(n.p,{children:["The tvm_language_model ",(0,p.jsx)(n.code,{children:"Component"})," provides a ",(0,p.jsx)(n.strong,{children:"method"}),"\n",(0,p.jsx)(n.a,{href:"/ailoy/docs/api-references/internal-runtime-apis#tvm_language_model.infer",children:(0,p.jsx)(n.code,{children:"infer"})}),",\nwhich can be used to perform LLM inference."]}),"\n",(0,p.jsxs)(s,{groupId:"code-language",children:[(0,p.jsx)(t,{value:"python",label:"Python",children:(0,p.jsx)(n.pre,{children:(0,p.jsx)(n.code,{className:"language-python",metastring:"showLineNumbers",children:'from ailoy import Runtime\n\nrt = Runtime()\n\nrt.define("tvm_language_model", "lm0", {"model": "Qwen/Qwen3-0.6B"})\n\nfor resp in rt.call_iter_method(\n    "lm0", "infer", {"messages": [{"role": "user", "content": [{"type": "text", "text": "What\'s your name?"}]}]}\n):\n    print(resp)\n\nrt.delete("lm0")\n\nrt.stop()\n'})})}),(0,p.jsx)(t,{value:"node",label:"JavaScript(Node)",children:(0,p.jsx)(n.pre,{children:(0,p.jsx)(n.code,{className:"language-typescript",metastring:"showLineNumbers",children:'import { startRuntime } from "ailoy-node";\n\n(async () => {\n  const rt = await startRuntime();\n\n  await rt.define("tvm_language_model", "lm0", {\n    model: "Qwen/Qwen3-0.6B",\n  });\n\n  for await (const resp of rt.callIterMethod("lm0", "infer", {\n    messages: [\n      { role: "user", content: [{ type: "text", text: "What\'s your name?" }] },\n    ],\n  })) {\n    console.log(resp);\n  }\n\n  await rt.delete("lm0");\n\n  await rt.stop();\n})();\n'})})})]}),"\n",(0,p.jsx)(a,{children:"\n{'message': {'role': 'assistant', 'content': 'My'}, 'finish_reason': None}\n{'message': {'role': 'assistant', 'content': ' name'}, 'finish_reason': None}\n{'message': {'role': 'assistant', 'content': ' is'}, 'finish_reason': None}\n{'message': {'role': 'assistant', 'content': ' an'}, 'finish_reason': None}\n{'message': {'role': 'assistant', 'content': ' AI'}, 'finish_reason': None}\n{'message': {'role': 'assistant', 'content': ' assistant'}, 'finish_reason': None}\n{'message': {'role': 'assistant', 'content': ','}, 'finish_reason': None}\n{'message': {'role': 'assistant', 'content': ' and'}, 'finish_reason': None}\n{'message': {'role': 'assistant', 'content': ' I'}, 'finish_reason': None}\n{'message': {'role': 'assistant', 'content': \"'m\"}, 'finish_reason': None}\n{'message': {'role': 'assistant', 'content': ' here'}, 'finish_reason': None}\n{'message': {'role': 'assistant', 'content': ' to'}, 'finish_reason': None}\n{'message': {'role': 'assistant', 'content': ' help'}, 'finish_reason': None}\n{'message': {'role': 'assistant', 'content': ' you'}, 'finish_reason': None}\n{'message': {'role': 'assistant', 'content': ' with'}, 'finish_reason': None}\n{'message': {'role': 'assistant', 'content': ' any'}, 'finish_reason': None}\n{'message': {'role': 'assistant', 'content': ' questions'}, 'finish_reason': None}\n{'message': {'role': 'assistant', 'content': ' or'}, 'finish_reason': None}\n{'message': {'role': 'assistant', 'content': ' tasks'}, 'finish_reason': None}\n{'message': {'role': 'assistant', 'content': '.'}, 'finish_reason': None}\n{'message': {'role': 'assistant', 'content': ' If'}, 'finish_reason': None}\n{'message': {'role': 'assistant', 'content': ' you'}, 'finish_reason': None}\n{'message': {'role': 'assistant', 'content': ' have'}, 'finish_reason': None}\n{'message': {'role': 'assistant', 'content': ' something'}, 'finish_reason': None}\n{'message': {'role': 'assistant', 'content': ' you'}, 'finish_reason': None}\n{'message': {'role': 'assistant', 'content': \"'d\"}, 'finish_reason': None}\n{'message': {'role': 'assistant', 'content': ' like'}, 'finish_reason': None}\n{'message': {'role': 'assistant', 'content': ' to'}, 'finish_reason': None}\n{'message': {'role': 'assistant', 'content': ' discuss'}, 'finish_reason': None}\n{'message': {'role': 'assistant', 'content': ','}, 'finish_reason': None}\n{'message': {'role': 'assistant', 'content': ' feel'}, 'finish_reason': None}\n{'message': {'role': 'assistant', 'content': ' free'}, 'finish_reason': None}\n{'message': {'role': 'assistant', 'content': ' to'}, 'finish_reason': None}\n{'message': {'role': 'assistant', 'content': ' ask'}, 'finish_reason': None}\n{'message': {'role': 'assistant', 'content': '!'}, 'finish_reason': None}\n{'message': {'role': 'assistant', 'content': ' \ud83d\ude0a'}, 'finish_reason': None}\n{'message': {'role': 'assistant', 'content': '\\n'}, 'finish_reason': 'stop'}\n"}),"\n",(0,p.jsxs)(n.p,{children:["You can put the context of freely structured conversations into Ailoy's\nlow-level ",(0,p.jsx)(n.code,{children:"Runtime"})," API calls for more advanced multi-turn conversation. e.g.\n",(0,p.jsx)(n.em,{children:(0,p.jsx)(n.a,{href:"https://arxiv.org/abs/2201.11903",children:"Chain-of-Thought Prompting"})})]}),"\n",(0,p.jsx)(n.p,{children:"In theory, an LLM generates responses based only on the context provided at the\nmoment\u2014it doesn't retain memory of past interactions by itself. Therefore, to\nreceive an appropriate response in an ongoing conversation with an LLM, you must\nprovide the entire conversation history up to that point each time you make a\nrequest."}),"\n",(0,p.jsxs)(s,{groupId:"code-language",children:[(0,p.jsx)(t,{value:"python",label:"Python",children:(0,p.jsx)(n.pre,{children:(0,p.jsx)(n.code,{className:"language-python",metastring:"showLineNumbers",children:'with Runtime() as rt:\n    rt.define("tvm_language_model", "lm0", {"model": "Qwen/Qwen3-8B"})\n\n    messages = [\n        {"role": "user", "content": [{"type": "text", "text": "if a>1, what is the sum of the real solutions of \'sqrt(a-sqrt(a+x))=x\'?"}]},\n        {"role": "assistant", "content": [{"type": "text", "text": "Let\'s think step by step."}]},  # Chain-of-Thought prompt\n    ]\n\n    for resp in rt.call_iter_method("lm0", "infer", {"messages": messages}):\n        print(resp["message"]["content"][0]["text"], end=\'\')\n\n    rt.delete("lm0")\n'})})}),(0,p.jsx)(t,{value:"node",label:"JavaScript(Node)",children:(0,p.jsx)(n.pre,{children:(0,p.jsx)(n.code,{className:"language-typescript",metastring:"showLineNumbers",children:'const rt = await startRuntime();\n\nawait rt.define("tvm_language_model", "lm0", {\n  model: "Qwen/Qwen3-8B",\n});\n\nconst messages = [\n  {\n    role: "user",\n    content: [\n      {\n        type: "text",\n        text: "if a>1, what is the sum of the real solutions of \'sqrt(a-sqrt(a+x))=x\'?",\n      },\n    ],\n  },\n  {\n    role: "assistant",\n    content: [{ type: "text", text: "Let\'s think step by step." }],\n  }, // Chain-of-Thought prompt\n];\n\nfor await (const resp of rt.callIterMethod("lm0", "infer", {\n  messages: messages,\n})) {\n  process.stdout.write(resp.message.content[0].text);\n}\n\nawait rt.delete("lm0");\n\nawait rt.stop();\n'})})})]}),"\n",(0,p.jsxs)(n.p,{children:["To override the system message, you can include a message with\n",(0,p.jsx)(n.code,{children:'"role": "system"'})," as the first element in the context messages array."]}),"\n",(0,p.jsxs)(s,{groupId:"code-language",children:[(0,p.jsx)(t,{value:"python",label:"Python",children:(0,p.jsx)(n.pre,{children:(0,p.jsx)(n.code,{className:"language-python",metastring:"showLineNumbers",children:'with Runtime() as rt:\n    rt.define("tvm_language_model", "lm0", {"model": "Qwen/Qwen3-8B"})\n\n    messages = [\n        {"role": "system", "content": [{"type": "text", "text": "You are a friendly chatbot who always responds in the style of a pirate."}]},\n        {"role": "user", "content": [{"type": "text", "text": "Who are you?"}]},\n    ]\n\n    for resp in rt.call_iter_method("lm0", "infer", {"messages": messages}):\n        print(resp["message"]["content"][0]["text"], end=\'\')\n\n    rt.delete("lm0")\n'})})}),(0,p.jsx)(t,{value:"node",label:"JavaScript(Node)",children:(0,p.jsx)(n.pre,{children:(0,p.jsx)(n.code,{className:"language-typescript",metastring:"showLineNumbers",children:'const rt = await startRuntime();\n\nawait rt.define("tvm_language_model", "lm0", {\n  model: "Qwen/Qwen3-8B",\n});\n\nconst messages = [\n  {\n    role: "system",\n    content: [\n      {\n        type: "text",\n        text: "You are a friendly chatbot who always responds in the style of a pirate.",\n      },\n    ],\n  },\n  { role: "user", content: [{ type: "text", text: "Who are you?" }] },\n];\n\nfor await (const resp of rt.callIterMethod("lm0", "infer", {\n  messages: messages,\n})) {\n  process.stdout.write(resp.message.content[0].text);\n}\n\nawait rt.delete("lm0");\n\nawait rt.stop();\n'})})})]})]})}function A(e={}){const{wrapper:n}={...(0,g.R)(),...e.components};return n?(0,p.jsx)(n,{...e,children:(0,p.jsx)(j,{...e})}):j(e)}function E(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}},8453:(e,n,t)=>{t.d(n,{R:()=>i,x:()=>r});var s=t(6540);const a={},o=s.createContext(a);function i(e){const n=s.useContext(o);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:i(e.components),s.createElement(o.Provider,{value:n},e.children)}}}]);